(function(o,i,s,u,t,d){"use strict";var a=void 0;const h=s.findByProps("startEditMessage"),g=findbyProps("getCurrentUser");let n=!1;var f={onLoad:function(){t.logger.log("BetterBetterChatGesturesV3: Plugin loading...");try{const e=i.patcher.after("render",s.findByName("ChatMessage",!1),function([{message:r,channel:c}],l){if(!r||!c)return l;const p=d.Gesture.Tap().numberOfTaps(2).maxDelay(250).onEnd(function(M,B){B&&(n=!0,setTimeout(function(){n=!1},100),r.author.id===g.getCurrentUser().id?h.startEditMessage(c.id,r.id,r.content):u.FluxDispatcher.dispatch({type:"MESSAGE_START_REPLY",channel:c,message:r,showMention:!0}))});return u.React.createElement(d.GestureDetector,{gesture:p},l)});a.chatMessageUnpatch=e,t.logger.log("BetterBetterChatGesturesV3: ChatMessage component patched successfully.")}catch(e){t.logger.error("BetterBetterChatGesturesV3: FAILED to patch ChatMessage component.",e);return}try{const e=s.findByProps("addReaction","removeReaction");if(e){const r=i.patcher.before("addReaction",e,function(){if(n)return n=!1,!1});a.reactionUnpatch=r,t.logger.log("BetterBetterChatGesturesV3: ReactionModule patched successfully. Anti-reaction fix is active.")}else t.logger.warn("BetterBetterChatGesturesV3: Could not find ReactionModule. The anti-reaction fix is disabled. First double-tap may still trigger a reaction.")}catch(e){t.logger.error("BetterBetterChatGesturesV3: An error occurred while trying to patch ReactionModule.",e)}},onUnload:function(){t.logger.log("BetterBetterChatGesturesV3: Plugin unloading..."),a.chatMessageUnpatch?.(),a.reactionUnpatch?.()}};return o.default=f,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.logger,reactNativeGestureHandler);
