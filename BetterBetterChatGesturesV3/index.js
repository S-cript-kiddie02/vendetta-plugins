(function(x,c,N,t,e,T,V,n,f,R){"use strict";var i={Failed:n.getAssetIDByName("Small"),Delete:n.getAssetIDByName("ic_message_delete"),Copy:n.getAssetIDByName("toast_copy_link"),Open:n.getAssetIDByName("ic_leave_stage"),Clipboard:n.getAssetIDByName("pending-alert"),Clock:n.getAssetIDByName("clock"),Forum:n.getAssetIDByName("ic_forum_channel"),Settings:{Toasts:{Settings:n.getAssetIDByName("ic_selection_checked_24px"),Failed:n.getAssetIDByName("ic_close_circle_24px")},Initial:n.getAssetIDByName("coffee"),Update:n.getAssetIDByName("discover"),Locale:n.getAssetIDByName("ic_locale_24px"),External:n.getAssetIDByName("ic_raised_hand_list"),Edit:n.getAssetIDByName("ic_edit_24px"),Reply:n.getAssetIDByName("ic_reply_24px"),Keyboard:n.getAssetIDByName("ic_keyboard_24px")}},d={shadow:function(a=.1){return{shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:a,shadowRadius:4.65,elevation:8}},displayToast:function(a,s){e.toasts.open({content:s=="clipboard"?`Copied ${a} to clipboard.`:a,source:s=="clipboard"?i.Clipboard:i.Settings.Initial})}},I={plugin:{source:"https://github.com/S-cript-kiddie02/vendetta-plugins"},authors:{profile:{"Rosie<3":"https://github.com/acquitelol",MYSTRAVIL:"https://github.com/MYSTRAVIL/vendetta-plugins"}}};const{TouchableOpacity:L,View:B,Image:Y,Text:P,Animated:v}=T.General,M=c.findByProps("transitionToGuild"),U=c.findByStoreName("UserStore"),G=c.findByProps("showUserProfile"),u=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",...d.shadow()},image:{width:75,height:75,borderRadius:10,...d.shadow()},mainText:{opacity:.975,letterSpacing:.25},header:{color:f.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:f.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function H({name:a,authors:s}){const y=e.React.useRef(new v.Value(1)).current,r=function(){return v.spring(y,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},g=function(){return v.spring(y,{toValue:1,duration:250,useNativeDriver:!0}).start()},o=function(){return G.showUserProfile({userId:U.getCurrentUser().id})},S={transform:[{scale:y}]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(B,{style:u.container},e.React.createElement(L,{onPress:o,onPressIn:r,onPressOut:g},e.React.createElement(v.View,{style:S},e.React.createElement(Y,{style:[u.image],source:{uri:U?.getCurrentUser()?.getAvatarURL()?.replace("webp","png")}}))),e.React.createElement(B,{style:u.textContainer},e.React.createElement(L,{onPress:function(){return M.openURL(I.plugin.source)}},e.React.createElement(P,{style:[u.mainText,u.header]},a)),e.React.createElement(B,{style:{flexDirection:"row"}},e.React.createElement(P,{style:[u.mainText,u.subHeader]},"A project by"),s.map(function(E,b,_){return e.React.createElement(L,{onPress:function(){return M.openURL(I.author.profile[E.name]??"https://github.com/")}},e.React.createElement(P,{style:[u.mainText,u.subHeader,{paddingLeft:4,fontFamily:e.constants.Fonts.DISPLAY_BOLD,flexDirection:"row"}]},E.name,b<_.length-1?",":null))})))))}const{View:K,Text:z}=T.General,$=e.stylesheet.createThemedStyleSheet({text:{color:f.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:12}});function F({label:a,children:s}){return e.React.createElement(K,{style:{marginTop:10}},e.React.createElement(z,{style:[$.text,$.optionText]},a.toUpperCase()),s)}const{FormRow:l,FormSwitch:w,FormDivider:A,FormInput:W,FormText:j}=T.Forms,{ScrollView:q,View:C,Text:X}=T.General,h=e.stylesheet.createThemedStyleSheet({icon:{color:f.semanticColors.INTERACTIVE_NORMAL},item:{color:f.semanticColors.TEXT_MUTED,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM},container:{width:"90%",marginLeft:"5%",borderRadius:10,backgroundColor:f.semanticColors.BACKGROUND_MOBILE_SECONDARY,...d.shadow()},subheaderText:{color:f.semanticColors.HEADER_SECONDARY,textAlign:"center",margin:10,marginBottom:50,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:14},image:{width:"100%",maxWidth:350,borderRadius:10}});function J(){t.storage.tapUsernameMention===void 0&&(t.storage.tapUsernameMention=!1),t.storage.reply===void 0&&(t.storage.reply=!0),t.storage.userEdit===void 0&&(t.storage.userEdit=!0),t.storage.keyboardPopup===void 0&&(t.storage.keyboardPopup=!0),t.storage.delay===void 0&&(t.storage.delay="1000"),V.useProxy(t.storage);const a=e.ReactNative.Platform.OS==="android",s=function(r){/^\d*$/.test(r)&&(t.storage.delay=r)},y=function(){try{e.ReactNative.Linking&&e.ReactNative.Linking.openURL?e.ReactNative.Linking.openURL(I.plugin.source):d.displayToast("Cannot open URL: Linking not available","error")}catch(r){d.displayToast("Error opening URL","error"),console.error("Error opening URL:",r)}};return e.React.createElement(q,null,e.React.createElement(H,{name:t.manifest.name,authors:t.manifest.authors}),e.React.createElement(C,{style:{marginTop:20}},e.React.createElement(F,{label:"Preferences"},e.React.createElement(C,{style:[h.container]},e.React.createElement(l,{label:"Tap Username to Mention",subLabel:`Allows you to tap on a username to mention them instead of opening their profile.${a?" This option is disabled on Android.":""}`,onLongPress:function(){return d.displayToast("By default, Discord opens a profile when tapping on a username in chat. With this, it now mentions them, like on Android.","tooltip")},leading:e.React.createElement(l.Icon,{style:h.icon,source:t.storage.tapUsernameMention?i.Forum:i.Failed}),trailing:e.React.createElement(w,{value:a?!1:t.storage.tapUsernameMention,onValueChange:function(){a||(t.storage.tapUsernameMention=!t.storage.tapUsernameMention)}}),disabled:a}),e.React.createElement(A,null),e.React.createElement(l,{label:"Double Tap To Reply",subLabel:"Allows you to double tap on any messages to reply to them.",onLongPress:function(){return d.displayToast("Double tapping anyones message allows you to reply to them!","tooltip")},leading:e.React.createElement(l.Icon,{style:h.icon,source:t.storage.reply?i.Settings.Reply:i.Failed}),trailing:e.React.createElement(w,{value:t.storage.reply,onValueChange:function(){t.storage.reply=!t.storage.reply}})}),e.React.createElement(A,null),e.React.createElement(l,{label:"Open Keyboard Automatically",subLabel:"Opens the Keyboard when you reply to or edit a message with a double tap.",onLongPress:function(){return d.displayToast("Opens the Keyboard when you reply to or edit a message with a double tap.","tooltip")},leading:e.React.createElement(l.Icon,{style:h.icon,source:t.storage.keyboardPopup?i.Settings.Keyboard:i.Failed}),trailing:e.React.createElement(w,{value:t.storage.keyboardPopup,onValueChange:function(){t.storage.keyboardPopup=!t.storage.keyboardPopup}})}),e.React.createElement(A,null),e.React.createElement(l,{label:`${t.storage.userEdit?"Double tap to edit":"Double tap to reply to"} your own messages`,subLabel:`Allows you to double tap on any of your own messages to ${t.storage.userEdit?"edit":"reply to"} them.`,onLongPress:function(){return d.displayToast(`When double tapping on any of your own messages, you can now ${t.storage.userEdit?"edit them":"reply to them"}!`,"tooltip")},leading:e.React.createElement(l.Icon,{style:h.icon,source:t.storage.userEdit?i.Settings.Edit:i.Settings.Reply}),trailing:e.React.createElement(w,{value:t.storage.userEdit,onValueChange:function(){t.storage.userEdit=!t.storage.userEdit}})}),e.React.createElement(A,null),e.React.createElement(W,{value:t.storage.delay,onChange:s,placeholder:"1000",title:"Maximum Delay",keyboardType:"numeric"}),e.React.createElement(A,null),e.React.createElement(j,{style:{padding:10}},"The maximum delay between taps until the double tap event is cancelled. This is 300ms by default."))),e.React.createElement(F,{label:"Source"},e.React.createElement(C,{style:h.container},e.React.createElement(l,{label:"Source",subLabel:`Open the repository of ${t.manifest.name} externally.`,onLongPress:function(){return d.displayToast(`Opens the repository of ${t.manifest.name} on GitHub in an external page to view any source code of the plugin.`,"tooltip")},leading:e.React.createElement(l.Icon,{style:h.icon,source:i.Open}),trailing:function(){return e.React.createElement(l.Arrow,null)},onPress:y})))),e.React.createElement(X,{style:h.subheaderText},`Build: (${t.manifest.hash?.substring(0,8)||"dev"}`))}const Q=c.findByStoreName("ChannelStore"),Z=c.findByStoreName("MessageStore"),ee=c.findByStoreName("UserStore"),te=c.findByProps("sendMessage","startEditMessage"),ae=c.findByProps("createPendingReply"),re=c.findByProps("insertText"),D=c.findByProps("addReaction");let p;const ne=function(){if(p)return p;const a=window.vendetta?.metro?.cache||new Map;for(const[s,y]of a){const r=y?.exports;if(!r)continue;const g=[r,r.default,r.prototype];for(const o of g)if(o&&typeof o.handleTap=="function"&&typeof o.handleLongPress=="function")return R.logger.log("BetterChatGestures: Module de gestes trouv\xE9 via signature (handleTap + handleLongPress) !"),o}return null};let m=!1;function oe(){try{const a=re?.refs?.[0]?.current;a?.focus&&a.focus()}catch{}}const se={patches:[],onLoad(){var a,s;if(p=ne(),!p){R.logger.error("BetterChatGestures: FATAL - Impossible de trouver le module de gestes, m\xEAme par signature.");return}if((a=t.storage).reply??(a.reply=!0),(s=t.storage).userEdit??(s.userEdit=!0),D&&D.addReaction){const r=N.instead("addReaction",D,function(g,o){if(m){R.logger.log("BetterChatGestures: R\xE9action native bloqu\xE9e avec succ\xE8s !");return}return o.apply(D,g)});this.patches.push(r)}const y=N.instead("handleTap",p,function(r,g){try{const o=r[0];if(!o||!o.nativeEvent)return g.apply(p,r);const{messageId:S,channelId:E}=o.nativeEvent,b=Z.getMessage(E,S),_=Q.getChannel(E),O=ee.getCurrentUser();if(!b||!O)return g.apply(p,r);m=!0,setTimeout(function(){m=!1},500);const k=b.author.id===O.id;return R.logger.log(`Action d\xE9clench\xE9e (Auteur: ${k})`),k&&t.storage.userEdit?te.startEditMessage(E,S,b.content||""):t.storage.reply&&ae.createPendingReply({channel:_,message:b,shouldMention:!0}),oe(),!0}catch(o){return R.logger.error("Error in handleTap patch",o),m=!1,g.apply(p,r)}});this.patches.push(y),R.logger.log("BetterChatGestures: Charg\xE9 et op\xE9rationnel.")},onUnload(){this.patches.forEach(function(a){return a()}),this.patches=[],p=null,m=!1},settings:J};return x.default=se,Object.defineProperty(x,"__esModule",{value:!0}),x})({},vendetta.metro,vendetta.patcher,vendetta.plugin,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.ui.assets,vendetta.ui,vendetta);
